CREATE TABLE VENTA (

   CANTIDAD number(3) NOT NULL,
    TOTAL NUMBER(10) NOT NULL,
    CODIGO VARCHAR(10) NOT NULL UNIQUE,
    NUMERO varchar(6) NOT NULL UNIQUE ,
    
    CONSTRAINT codigo_fk FOREIGN KEY (CODIGO) REFERENCES PRODUCTO,
    CONSTRAINT   numero_fk FOREIGN KEY (NUMERO) REFERENCES FACTURA
);

CREATE TABLE FACTURA (
        NUMERO VARCHAR2(6) NOT NULL,
        FECHA DATE NOT NULL,
        SUBTOTAL NUMBER(10, 2) NOT NULL,
        IVA NUMBER(10, 2) NOT NULL,
        TOTAL NUMBER(10, 2) NOT NULL,
        
        CONSTRAINT IVA_CHK CHECK (IVA >= 0),
        CONSTRAINT TOTAL_CHK CHECK (TOTAL >= 0 AND TOTAL > IVA),
        CONSTRAINT factura_pk PRIMARY KEY (NUMERO)
);

CREATE TABLE PRODUCTO(
        CODIGO VARCHAR(10) NOT NULL,
        DESCRIPCION VARCHAR(10) NOT NULL, 
        PRECIO_UNITARIO NUMBER(10, 2) NOT NULL,
        CONSTRAINT PRECIO_UNITARIO_CHK CHECK (PRECIO_UNITARIO >= 0),
        CONSTRAINT producto_pk PRIMARY KEY (CODIGO)
        
);

CREATE TABLE CLIENTE (
    RUT varchar2(13) NOT NULL UNIQUE,
    NOMBRE varchar2(50) NOT NULL,
    APELLIDO1 varchar2(50) NOT NULL,
    APELLIDO2 varchar2(50),
    DOMICILIO varchar2(100) NOT NULL, 
    TELEFONO NUMBER(10)
);

