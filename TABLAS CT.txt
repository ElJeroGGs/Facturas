CREATE TABLE VENTA (
        NUMERO VARCHAR2(6) NOT NULL,
        CODIGO VARCHAR2(6) NOT NULL,
        CANTIDAD NUMBER(10, 2) NOT NULL,
        
        CONSTRAINT numero_fk FOREIGN KEY (NUMERO) REFERENCES FACTURA ON DELETE CASCADE,
        CONSTRAINT venta_pk PRIMARY KEY (NUMERO, CODIGO)
);

CREATE TABLE FACTURA (
        NUMERO VARCHAR2(6) NOT NULL,
        FECHA DATE NOT NULL,
        SUBTOTAL NUMBER(10, 2) NOT NULL,
        IVA NUMBER(10, 2) NOT NULL,
        TOTAL NUMBER(10, 2) NOT NULL,
        RUT VARCHAR2(13) NOT NULL,
        
        CONSTRAINT IVA_CHK CHECK (IVA >= 0),
        CONSTRAINT TOTAL_CHK CHECK (TOTAL >= 0),
        CONSTRAINT rut_fk FOREIGN KEY (RUT) REFERENCES CLIENTE ON DELETE CASCADE,
        CONSTRAINT factura_pk PRIMARY KEY (NUMERO)
);

CREATE TABLE PRODUCTO(
        CODIGO VARCHAR(10) NOT NULL,
        DESCRIPCION VARCHAR(200) NOT NULL, 
        PRECIO_UNITARIO NUMBER(10, 2) NOT NULL,
        CONSTRAINT PRECIO_UNITARIO_CHK CHECK (PRECIO_UNITARIO >= 0),
        CONSTRAINT producto_pk PRIMARY KEY (CODIGO)
        
);

CREATE TABLE CLIENTE (
    RUT varchar2(13) NOT NULL,
    NOMBRE varchar2(50) NOT NULL,
    APELLIDO1 varchar2(50) NOT NULL,
    APELLIDO2 varchar2(50),
    DOMICILIO varchar2(100) NOT NULL, 
    TELEFONO NUMBER(10),
    
    CONSTRAINT rut_pk PRIMARY KEY (RUT)
);